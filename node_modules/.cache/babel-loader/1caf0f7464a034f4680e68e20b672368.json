{"ast":null,"code":"import { CONFIG } from '../../config.js';\nimport axios from 'axios';\nexport default async function getPortfolio(key, chainId, address) {\n  //Given chain_id and wallet address, return wallet value for the last 30 days at 24 hour timestamps.\n\n  let api_call_portfolio = `https://api.covalenthq.com/v1/` + `${chainId}/address/${address}/pbalances_v2/?key=${key}`;\n  https:\n  //api.covalenthq.com/v1/:chain_id/address/:address/portfolio_v2/?&key=ckey_af1d8bda66e340bd835f1855487\n  try {\n    const resp = await axios.get(api_call_portfolio, {\n      auth: {\n        username: key\n      }\n    });\n    console.log(resp);\n    // Organize response data to insert into graph\n    //let date_to_blockheight = resp.data.data.items.map(i => ({x:i., y:i.floor_price_quote_7d})).reverse()\n\n    let tokens_balances = resp.data.data.items.map(i => ({\n      x: i.quote\n    }));\n    let total_portfolio_in_dollar = tokens_balances.reduce((partialSum, a) => partialSum + a, 0);\n    console.log(total_portfolio_in_dollar);\n  } catch (error) {\n    console.log(\"fail to fetch token balance for address\");\n  }\n}","map":{"version":3,"names":["CONFIG","axios","getPortfolio","key","chainId","address","api_call_portfolio","https","resp","get","auth","username","console","log","tokens_balances","data","items","map","i","x","quote","total_portfolio_in_dollar","reduce","partialSum","a","error"],"sources":["/Users/yuchenpeng/dao_terminal_v0/src/api/v1/getPortfolio.js"],"sourcesContent":["\n\n\nimport {CONFIG} from '../../config.js'\nimport axios from 'axios';\n\n\nexport default async function getPortfolio(key,chainId,address){\n    //Given chain_id and wallet address, return wallet value for the last 30 days at 24 hour timestamps.\n    \n\n    let api_call_portfolio =`https://api.covalenthq.com/v1/` +\n    `${chainId}/address/${address}/pbalances_v2/?key=${key}`\n\n\n    https://api.covalenthq.com/v1/:chain_id/address/:address/portfolio_v2/?&key=ckey_af1d8bda66e340bd835f1855487\n    try{\n        const resp = await axios.get(api_call_portfolio, {auth: {username: key}})\n        console.log(resp)\n        // Organize response data to insert into graph\n        //let date_to_blockheight = resp.data.data.items.map(i => ({x:i., y:i.floor_price_quote_7d})).reverse()\n       \n        let tokens_balances = resp.data.data.items.map(i => ({x:i.quote}))\n        let total_portfolio_in_dollar= tokens_balances.reduce((partialSum, a) => partialSum + a, 0);\n       \n        console.log(total_portfolio_in_dollar)\n       }catch(error){\n          console.log(\"fail to fetch token balance for address\")\n      }\n\n\n\n    \n  }"],"mappings":"AAGA,SAAQA,MAAM,QAAO,iBAAiB;AACtC,OAAOC,KAAK,MAAM,OAAO;AAGzB,eAAe,eAAeC,YAAY,CAACC,GAAG,EAACC,OAAO,EAACC,OAAO,EAAC;EAC3D;;EAGA,IAAIC,kBAAkB,GAAG,gCAA+B,GACvD,GAAEF,OAAQ,YAAWC,OAAQ,sBAAqBF,GAAI,EAAC;EAGxDI,KAAK;EAAC;EACN,IAAG;IACC,MAAMC,IAAI,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAACH,kBAAkB,EAAE;MAACI,IAAI,EAAE;QAACC,QAAQ,EAAER;MAAG;IAAC,CAAC,CAAC;IACzES,OAAO,CAACC,GAAG,CAACL,IAAI,CAAC;IACjB;IACA;;IAEA,IAAIM,eAAe,GAAGN,IAAI,CAACO,IAAI,CAACA,IAAI,CAACC,KAAK,CAACC,GAAG,CAACC,CAAC,KAAK;MAACC,CAAC,EAACD,CAAC,CAACE;IAAK,CAAC,CAAC,CAAC;IAClE,IAAIC,yBAAyB,GAAEP,eAAe,CAACQ,MAAM,CAAC,CAACC,UAAU,EAAEC,CAAC,KAAKD,UAAU,GAAGC,CAAC,EAAE,CAAC,CAAC;IAE3FZ,OAAO,CAACC,GAAG,CAACQ,yBAAyB,CAAC;EACvC,CAAC,QAAMI,KAAK,EAAC;IACVb,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;EAC1D;AAKJ"},"metadata":{},"sourceType":"module"}