{"ast":null,"code":"import axios from 'axios';\nimport { CONFIG } from '../../config.js';\nexport default async function getSpotPrice(chainId, contractAddress, startDate, apiKey) {\n  let api_spot_price = `https://api.covalenthq.com/v1/pricing/historical_by_addresses_v2/${chainId}/USD/${contractAddress}/?quote-currency=USD&format=JSON&from=${startDate}&to=${endDate}&key=${apiKey}`;\n  try {\n    const resp = await axios.get(api_spot_price, {\n      auth: {\n        username: CONFIG.TEMPLATE.api_key\n      }\n    });\n    console.log(resp);\n\n    // Organize response data to insert into graph\n    //let date_to_blockheight = resp.data.data.items.map(i => ({x:i., y:i.floor_price_quote_7d})).reverse()\n\n    //  let date_to_blockheight = resp.data.data.prices.map(i => ({x:i.}))\n    //  let start_date_block_height = date_to_blockheight[0]\n    //  let end_date_block_height = date_to_blockheight[-1]\n  } catch (error) {\n    console.log(\"fail to fetch token holders\");\n  }\n}","map":{"version":3,"names":["axios","CONFIG","getSpotPrice","chainId","contractAddress","startDate","apiKey","api_spot_price","endDate","resp","get","auth","username","TEMPLATE","api_key","console","log","error"],"sources":["/Users/yuchenpeng/dao_terminal_v0/src/api/v1/getSpotPrices.js"],"sourcesContent":["\nimport axios from 'axios';\nimport {CONFIG} from '../../config.js'\n\n\n\n export default async function getSpotPrice(chainId, contractAddress, startDate, apiKey){\n\n    let api_spot_price = `https://api.covalenthq.com/v1/pricing/historical_by_addresses_v2/${chainId}/USD/${contractAddress}/?quote-currency=USD&format=JSON&from=${startDate}&to=${endDate}&key=${apiKey}`\n    \n    try{\n     const resp = await axios.get(api_spot_price, {auth: {username: CONFIG.TEMPLATE.api_key}})\n     console.log(resp)\n\n     // Organize response data to insert into graph\n     //let date_to_blockheight = resp.data.data.items.map(i => ({x:i., y:i.floor_price_quote_7d})).reverse()\n    \n    //  let date_to_blockheight = resp.data.data.prices.map(i => ({x:i.}))\n    //  let start_date_block_height = date_to_blockheight[0]\n    //  let end_date_block_height = date_to_blockheight[-1]\n    \n     \n \n    }catch(error){\n       console.log(\"fail to fetch token holders\")\n   }\n  }\n\n\n\n"],"mappings":"AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,MAAM,QAAO,iBAAiB;AAIrC,eAAe,eAAeC,YAAY,CAACC,OAAO,EAAEC,eAAe,EAAEC,SAAS,EAAEC,MAAM,EAAC;EAEpF,IAAIC,cAAc,GAAI,oEAAmEJ,OAAQ,QAAOC,eAAgB,yCAAwCC,SAAU,OAAMG,OAAQ,QAAOF,MAAO,EAAC;EAEvM,IAAG;IACF,MAAMG,IAAI,GAAG,MAAMT,KAAK,CAACU,GAAG,CAACH,cAAc,EAAE;MAACI,IAAI,EAAE;QAACC,QAAQ,EAAEX,MAAM,CAACY,QAAQ,CAACC;MAAO;IAAC,CAAC,CAAC;IACzFC,OAAO,CAACC,GAAG,CAACP,IAAI,CAAC;;IAEjB;IACA;;IAED;IACA;IACA;EAIA,CAAC,QAAMQ,KAAK,EAAC;IACVF,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;EAC9C;AACD"},"metadata":{},"sourceType":"module"}