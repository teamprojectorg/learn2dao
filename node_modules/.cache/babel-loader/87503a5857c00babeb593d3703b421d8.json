{"ast":null,"code":"import axios from 'axios';\nimport { CONFIG } from '../../config.js';\nexport default async function getSpotPrice(chainId, address, startDate, endDate, apiKey) {\n  // Return the spot price of the DAO token from startDate to endDate\n  // input: \n  // key: Covalent API key\n  // chainId: the Chain the DAO is hosted on (Ethereum, Solana, etc..)\n  // address: the smart contract address of the DAO \n  // startDate\n  // endDate\n\n  // output:\n  // dates_to_spotPrices: {'2022-10-01':1.2, '2022-10-02':1.4}\n\n  let api_spot_price = `https://api.covalenthq.com/v1/pricing/historical_by_addresses_v2/${chainId}/USD/${address}/?quote-currency=USD&format=JSON&from=${startDate}&to=${endDate}&key=${apiKey}`;\n  try {\n    const resp = await axios.get(test, {\n      auth: {\n        username: CONFIG.TEMPLATE.api_key\n      }\n    });\n    var dates_to_spotPrices = new Array();\n    dates_to_spotPrices['2022-10-01'] = 1.2;\n    dates_to_spotPrices['2022-10-02'] = 1.2;\n    dates_to_spotPrices['2022-10-03'] = 1.2;\n    dates_to_spotPrices['2022-10-04'] = 1.2;\n    return dates_to_spotPrices;\n  } catch (error) {\n    console.log(\"fail to fetch\");\n  }\n}","map":{"version":3,"names":["axios","CONFIG","getSpotPrice","chainId","address","startDate","endDate","apiKey","api_spot_price","resp","get","test","auth","username","TEMPLATE","api_key","dates_to_spotPrices","Array","error","console","log"],"sources":["/Users/yuchenpeng/dao_terminal_v0/src/api/v1/getSpotPrices.js"],"sourcesContent":["\nimport axios from 'axios';\nimport {CONFIG} from '../../config.js'\n\n\n\n export default async function getSpotPrice(chainId, address, startDate, endDate, apiKey){\n    // Return the spot price of the DAO token from startDate to endDate\n    // input: \n    // key: Covalent API key\n    // chainId: the Chain the DAO is hosted on (Ethereum, Solana, etc..)\n    // address: the smart contract address of the DAO \n    // startDate\n    // endDate\n  \n    // output:\n    // dates_to_spotPrices: {'2022-10-01':1.2, '2022-10-02':1.4}\n   \n    let api_spot_price = `https://api.covalenthq.com/v1/pricing/historical_by_addresses_v2/${chainId}/USD/${address}/?quote-currency=USD&format=JSON&from=${startDate}&to=${endDate}&key=${apiKey}`\n    \n    try{\n     const resp = await axios.get(test, {auth: {username: CONFIG.TEMPLATE.api_key}})\n     \n     var dates_to_spotPrices = new Array();\n     dates_to_spotPrices['2022-10-01'] = 1.2;\n     dates_to_spotPrices['2022-10-02'] = 1.2;\n     dates_to_spotPrices['2022-10-03'] = 1.2;\n     dates_to_spotPrices['2022-10-04'] = 1.2;\n\n     return dates_to_spotPrices\n\n    }catch(error){\n       console.log(\"fail to fetch\")\n   }\n  }\n\n\n\n"],"mappings":"AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,MAAM,QAAO,iBAAiB;AAIrC,eAAe,eAAeC,YAAY,CAACC,OAAO,EAAEC,OAAO,EAAEC,SAAS,EAAEC,OAAO,EAAEC,MAAM,EAAC;EACrF;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA,IAAIC,cAAc,GAAI,oEAAmEL,OAAQ,QAAOC,OAAQ,yCAAwCC,SAAU,OAAMC,OAAQ,QAAOC,MAAO,EAAC;EAE/L,IAAG;IACF,MAAME,IAAI,GAAG,MAAMT,KAAK,CAACU,GAAG,CAACC,IAAI,EAAE;MAACC,IAAI,EAAE;QAACC,QAAQ,EAAEZ,MAAM,CAACa,QAAQ,CAACC;MAAO;IAAC,CAAC,CAAC;IAE/E,IAAIC,mBAAmB,GAAG,IAAIC,KAAK,EAAE;IACrCD,mBAAmB,CAAC,YAAY,CAAC,GAAG,GAAG;IACvCA,mBAAmB,CAAC,YAAY,CAAC,GAAG,GAAG;IACvCA,mBAAmB,CAAC,YAAY,CAAC,GAAG,GAAG;IACvCA,mBAAmB,CAAC,YAAY,CAAC,GAAG,GAAG;IAEvC,OAAOA,mBAAmB;EAE3B,CAAC,QAAME,KAAK,EAAC;IACVC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;EAChC;AACD"},"metadata":{},"sourceType":"module"}